<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:wicket="http://git-wip-us.apache.org/repos/asf/wicket/repo?p=wicket.git;a=blob_plain;f=wicket-core/src/main/resources/META-INF/wicket-1.5.xsd;hb=master">

<wicket:extend>

    <h1>Javascript Test Page</h1>

    <button onclick="fireCustomBehavior()">Javascript Behavior</button>
    <span wicket:id="customBehaviorLabel"></span>

    <form wicket:id="wicketForm">
        <button wicket:id="wicketButton">Wicket Behavior</button>
    </form>

    <div style="margin: 10px;">
        <h2>Research Results</h2>
        <p style="max-width: 50%; font-size: .9em; margin: 20px auto;">
            What I have found is that it is possible to call a custom ajax behavior defined in wicket from a
            javascript function. However this call causes the wicket page render count to increase which causes
            subsequent ajax calls to fail. Wicket has a way of responding to ajax calls without increasing the page
            render count, but I have not discovered exactly how it does this and whether this is possible to do for a
            custom behavior.
        </p>
    </div>

    <a href="#" onclick="fire3()">Attempt 3</a>
    <div>
        <p wicket:id="handler3Label"></p>
    </div>

    <p>
        Attempt 3 might be working.
    </p>

    <h1>Update</h1>
    <p>
        I have cracked the code. Use the <strong>Wicket.Ajax.ajax</strong> methods for calling from javascript
        and if that's not possible set the header in ajax requests:
    </p>
    <ul>
        <li><strong>Wicket-Ajax</strong>: "true"</li>
        <li><strong>Wicket-Ajax-BaseURL</strong>: Wicket.Ajax.baseUrl (this comes from wicket-ajax-jquery.js)</li>
    </ul>

</wicket:extend>

</html>